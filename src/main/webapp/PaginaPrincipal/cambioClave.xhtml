<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui">
    <h:head>
        <title>Recuperación de Contraseña - C'est La Vie</title>
        <link href="../resources/css/PaginaPrincipal.css" rel="stylesheet" type="text/css"/>
        <style>
            .downwards .dropdown-submenu>.dropdown-menu {
                position: relative;
                left: -0;
            }
        </style>
        <f:event type="preRenderView" listener="#{validarSesionController.index()}"/>
    </h:head>
    <h:body class="body">
        <div id="usuarioLogeadoDIV" style="display: none" >#{userController.kevin}</div>
        <div class="menu">
            <b:navBar brand-img="../resources/Imagenes/a1 - copia (2).jpg" brandHref="PaginaPrincipal.xhtml" inverse="false">

                <b:navbarLinks pull="right"><b:navLink value="    " href="#"></b:navLink></b:navbarLinks>
                <b:navbarLinks pull="right" styleClass="hidden-xs">
                    <b:dropMenu value="Iniciar Sesión" icon="user" styleClass="btnOcultarOPCUser">
                        <h:form>
                            <b:container fluid="true">
                                <br></br>
                                <b:commandButton value="Iniciar Sesión" look="info" style="width: 100%" action="Usuario"/>
                                <br></br>
                                <br></br>
                                <p>¿No tienes cuenta? </p>
                                <b:link value="Registrate" outcome="RegistroUsuario"/>
                                <br></br>
                                <br></br>
                            </b:container>
                        </h:form>
                    </b:dropMenu>
                    <b:dropMenu value="Usuario logeado"  icon="user" style="height: 35%" rendered="#{facesContext.getCurrentInstance().getExternalContext().getSessionMap()!=null}" styleClass="btnVerOPCUser">
                        <b:container fluid="true" style="align-content: center;text-align: center">
                            <h:form>
                                <img src="../resources/Imagenes/icon.jpg" style="width: 100%"/>
                                <p:separator/>
                                <b:commandButton value="Editar perfil" look="info" action="#{validarSesionController.redireccion()}" style="width: 100%"/><br/><br/>
                                <b:commandButton value="Cerrar sesión"  actionListener="#{validarSesionController.salir()}" look="info" style="width: 100%"/>
                            </h:form>
                        </b:container>
                    </b:dropMenu>
                    <b:navLink value="Favoritos" icon="heart" href="#"></b:navLink>
                    <b:navLink value="Bolsa" icon="shopping-cart" href="#"></b:navLink>
                </b:navbarLinks>
            </b:navBar>
        </div>
        <p:growl id="msj"/>
        <h:form id="c">             
            <p:panel header="Cambio de contraseña" widgetVar="p">  
                <h:panelGrid columns="2">

                    <p:outputLabel for="clave" value="Nueva contraseña:"/>
                    <p:password id="clave" value="#{userController.clave1}"  required="true" requiredMessage="Ingrese una contraseña"/>  
                    <p:outputLabel for="clave1" value="Confirme la contraseña:"/>
                    <p:password id="clave1" value="#{userController.clave2}"  required="true" requiredMessage="Confirme la contraseña"/>  
                    <p:commandButton value="Enviar" actionListener="#{userController.cambioClave()}" update=":msj :c"/>   
                </h:panelGrid>
            </p:panel>
        </h:form>        
    </h:body>
</html>

