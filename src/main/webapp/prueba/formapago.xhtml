<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
      <p:growl id="mensaje"/>
      <h:form>
            <p:fieldset legend="Nueva forma de pago">
                  <p:panelGrid columns="1">
                        <p:commandButton value="Abrir formulario" oncomplete="PF('modal').show()"/>
                  </p:panelGrid>
            </p:fieldset>   
      </h:form>
      <p:dialog widgetVar="modal" modal="true" showEffect="clip" resizable="true">
      <p:ajax event="close" listener="#{formaPagoController.limpiar()}"/>
      <h:form id="formulario">
            <p:panelGrid columns="2">
                  <p:outputLabel value="Nombre de la forma de pago"/>
                  <p:inputText value="#{formaPagoController.formapago.nombreFormaPago}"/>
                  <p:outputLabel/>
                  <p:commandButton value="Guardar" actionListener="#{formaPagoController.crear()}" update="formulario :tabla :mensaje" oncomplete="PF('modal').hide()" rendered="#{formaPagoController.formapago.idFormaPago==0}"/>
                  <p:commandButton value="Modificar" actionListener="#{formaPagoController.editar()}" update="formulario :tabla :mensaje" oncomplete="PF('modal').hide()" rendered="#{formaPagoController.formapago.idFormaPago!=0}"/>
            </p:panelGrid>
      </h:form>
      </p:dialog>
       <h:form id="tabla">    
            <p:fieldset legend="Forma de pago">
                <p:dataTable value="#{formaPagoController.listapago}" var="fp">
                    <p:column headerText="Id">
                        <h:outputText value="#{fp.idFormaPago}"/>
                    </p:column>
                      <p:column headerText="Forma de pago">
                            <h:outputLabel value="#{fp.nombreFormaPago}"/>
                      </p:column>
                      <p:column headerText="Modificar">
                            <p:commandButton value="Modiifcar" actionListener="#{formaPagoController.cargarDatos(fp)}" update=":formulario" oncomplete="PF('modal').show()"/>
                      </p:column>
                      <p:column headerText="Eliminar">
                            <p:commandButton value="Eliminar" actionListener="#{formaPagoController.eliminar(fp)}" update=":formulario :tabla"/>
                      </p:column>
                </p:dataTable>
            </p:fieldset>           
        </h:form>
    </h:body>
</html>