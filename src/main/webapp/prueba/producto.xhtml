<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <body>
        <p:growl id="msj"/>
        <p:outputLabel value="Producto"/>

        <h:form >
            <p:outputLabel value="Nombre"/>
            <p:inputText value="#{ProductoController.producto.nombre}"/>
            <p:outputLabel value="Stock"/>
            <p:inputText value="#{ProductoController.producto.stock}"/>
            <p:outputLabel value="Precio Venta"/>
            <p:inputText value="#{ProductoController.producto.precioVenta}"/>
            <p:outputLabel value="Precio Compra"/>
            <p:inputText value="#{ProductoController.producto.precioCompra}"/>
            <p:outputLabel value="Seleccione una    Marca" for="marca"/>
            <p:selectOneMenu id="marca" value="#{ProductoController.marca.id}">
                <f:selectItems value="#{marcaController.listamarca}" var="m"
                               itemLabel="#{m.nombre}" itemValue="#{m.id}"/>
            </p:selectOneMenu>
            <p:outputLabel value="Seleccione una talla" for="talla"/>
            <p:selectOneMenu id="talla" value="#{ProductoController.talla.id}">
                <f:selectItems value="#{tallaController.listaTalla}" var="t"
                               itemLabel="#{t.talla}" itemValue="#{t.id}"/>
            </p:selectOneMenu>
            <p:outputLabel value="Seleccione un tipo de ropa" for="tipo"/>
            <p:selectOneMenu id="tipo" value="#{ProductoController.tiporopa.id}">
                <f:selectItems value="#{tipoRopaController.listaTipoRopa}" var="r"
                               itemLabel="#{r.nombre}" itemValue="#{r.id}"/>
            </p:selectOneMenu>
            <p:outputLabel value="Seleccione una categoria" for="categoria"/>
            <p:selectOneMenu id="categoria" value="#{ProductoController.categoria.id}">
                <f:selectItems value="#{categoriaController.listaCategoria}" var="c"
                               itemLabel="#{c.nombre}" itemValue="#{c.id}"/>
            </p:selectOneMenu>
            <p:commandButton value="Enviar" actionListener="#{ProductoController.insertar()}" update=":msj :tabla"/>
        </h:form>

        <p:dataTable id="tabla" value="#{ProductoController.listaproducto}" var="ver" >
            <p:column headerText="id">
                <p:outputLabel value="#{ver.id}"/>
            </p:column>
            <p:column headerText="nombre">
                <p:outputLabel value="#{ver.nombre}"/>
            </p:column>
            <p:column headerText="stock">
                <p:outputLabel value="#{ver.stock}"/>
            </p:column>
            <p:column headerText="precio de venta">
                <p:outputLabel value="#{ver.precioVenta}"/>
            </p:column>
            <p:column headerText="precio de compra">
                <p:outputLabel value="#{ver.precioCompra}"/>
            </p:column>
            <p:column headerText="Marca">
                <p:outputLabel value="#{ver.marca.nombre}"/>
            </p:column>
            <p:column headerText="Talla">
                <p:outputLabel value="#{ver.talla.talla}"/>
            </p:column>
            <p:column headerText="Tipo de ropa">
                <p:outputLabel value="#{ver.tipo.nombre}"/>
            </p:column>
            <p:column headerText="Categoria">
                <p:outputLabel value="#{ver.categoria.nombre}"/>
            </p:column>
            <p:column headerText="Modificar">
                <p:commandLink value="Modificar" actionListener="#{ProductoController.cargarData(ver)}" update=":nuevo"
                               oncomplete="PF('p').show()"/>
            </p:column>
            <p:column headerText="Eliminar" >
                <p:commandLink value="Eliminar" actionListener="#{ProductoController.eliminar(ver)}" 
                               update="tabla :msj" />
            </p:column>
        </p:dataTable>

        <p:dialog id="nuevo" widgetVar="p" header="Datos">
            <h:form>
                <p:outputLabel value="id"/>
                <p:inputText value="#{ProductoController.producto.id}"/>
                <p:outputLabel value="Nombre"/>
                <p:inputText value="#{ProductoController.producto.nombre}"/>
                <p:outputLabel value="Stock"/>
                <p:inputText value="#{ProductoController.producto.stock}"/>
                <p:outputLabel value="Precio Venta"/>
                <p:inputText value="#{ProductoController.producto.precioVenta}"/>
                <p:outputLabel value="Precio Compra"/>
                <p:inputText value="#{ProductoController.producto.precioCompra}"/>
                <p:outputLabel value="Seleccione una    Marca" for="marca"/>
                <p:selectOneMenu id="marca" value="#{ProductoController.marca.id}">
                    <f:selectItems value="#{marcaController.listamarca}" var="m"
                                   itemLabel="#{m.nombre}" itemValue="#{m.id}"/>
                </p:selectOneMenu>
                <p:outputLabel value="Seleccione una talla" for="talla"/>
                <p:selectOneMenu id="talla" value="#{ProductoController.talla.id}">
                    <f:selectItems value="#{tallaController.listaTalla}" var="t"
                                   itemLabel="#{t.talla}" itemValue="#{t.id}"/>
                </p:selectOneMenu>
                <p:outputLabel value="Seleccione un tipo de ropa" for="tipo"/>
                <p:selectOneMenu id="tipo" value="#{ProductoController.tiporopa.id}">
                    <f:selectItems value="#{tipoRopaController.listaTipoRopa}" var="r"
                                   itemLabel="#{r.nombre}" itemValue="#{r.id}"/>
                </p:selectOneMenu>
                <p:outputLabel value="Seleccione una categoria" for="categoria"/>
                <p:selectOneMenu id="categoria" value="#{ProductoController.categoria.id}">
                    <f:selectItems value="#{categoriaController.listaCategoria}" var="c"
                                   itemLabel="#{c.nombre}" itemValue="#{c.id}"/>
                </p:selectOneMenu>
                <p:commandButton value="Modificar" actionListener="#{ProductoController.actualizar()}" update=":tabla :msj" oncomplete="PF('p').hide()"/>
                <p:commandButton value="Cancelar" oncomplete="PF('p').hide()"/>
            </h:form>
        </p:dialog>
    </body>
</html>
